# Multipart File Upload Configuration
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# File Upload Directory - Docker volume path
file.upload-dir=${FILE_UPLOAD_DIR:/app/uploads}

# Static Resources Configuration
spring.web.resources.static-locations=classpath:/static/,file:${file.upload-dir}/

# Database Configuration - Railway prioritized
spring.datasource.url=${DATABASE_URL:${RAILWAY_DATABASE_URL:jdbc:postgresql://db.gbzwqsyoihqtpcionaze.supabase.co:5432/postgres?sslmode=require}}
spring.datasource.username=${DATABASE_USERNAME:${PGUSER:postgres.gbzwqsyoihqtpcionaze}}
spring.datasource.password=${DATABASE_PASSWORD:${PGPASSWORD:vBSwzV/@S8D?uvn}}
spring.datasource.driver-class-name=org.postgresql.Driver

# HikariCP connection pool settings for Railway/Supabase
spring.datasource.hikari.maximum-pool-size=3
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.connection-timeout=60000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.initialization-fail-timeout=-1
spring.datasource.hikari.connection-test-query=SELECT 1
spring.datasource.hikari.leak-detection-threshold=120000

# JPA Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false
spring.jpa.open-in-view=false

# Disable Spring Data JDBC auto-configuration (we're using JdbcTemplate manually)
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.data.jdbc.JdbcRepositoriesAutoConfiguration,org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration

# SQL Initialization - Disable SQL scripts (let Hibernate create tables)
spring.sql.init.mode=never
# spring.sql.init.continue-on-error=false
# spring.sql.init.schema-locations=classpath:schema-postgresql.sql
# spring.sql.init.data-locations=classpath:data-postgresql.sql

# Gmail SMTP Configuration
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=222x3.666@gmail.com
spring.mail.password=ffmypowkirdfehkf
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com
spring.mail.properties.mail.smtp.connectiontimeout=30000
spring.mail.properties.mail.smtp.timeout=30000
spring.mail.properties.mail.smtp.writetimeout=30000
spring.mail.properties.mail.debug=false
spring.mail.properties.mail.smtp.ssl.protocols=TLSv1.2

# Email sender info
app.email.from=222x3.666@gmail.com
app.email.name=Web Từ Thiện

# Application Base URL (for Railway deployment)
app.base-url=${RAILWAY_STATIC_URL:${RAILWAY_PUBLIC_DOMAIN:http://localhost:8080}}

# Logging
logging.level.org.springframework.web=INFO
logging.level.org.example.webtuthien=DEBUG
logging.level.org.springframework.mail=DEBUG
logging.level.com.zaxxer.hikari=INFO
logging.level.com.zaxxer.hikari.pool.HikariPool=INFO

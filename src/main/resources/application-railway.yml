spring:
  datasource:
    # Primary connection - Direct to Supabase
    url: jdbc:postgresql://db.gbzwqsyoihqtpcionaze.supabase.co:5432/postgres?sslmode=require&ssl=true&sslfactory=org.postgresql.ssl.NonValidatingFactory
    username: postgres.gbzwqsyoihqtpcionaze
    password: ${DATABASE_PASSWORD}
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: 3
      minimum-idle: 1
      connection-timeout: 60000
      idle-timeout: 300000
      max-lifetime: 600000
      leak-detection-threshold: 120000
      # Force SSL
      data-source-properties:
        sslmode: require
        ssl: true
        sslfactory: org.postgresql.ssl.NonValidatingFactory
        socketTimeout: 30
        loginTimeout: 10
        connectTimeout: 30
        ApplicationName: web-tu-thien-railway
        
  jpa:
    hibernate:
      ddl-auto: none
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: false
        show_sql: false
        jdbc:
          time_zone: UTC
    show-sql: false
    
  sql:
    init:
      mode: never
      
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB
      
  mail:
    host: smtp.gmail.com
    port: 587
    username: 222x3.666@gmail.com
    password: 0359855353
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true
          connectiontimeout: 5000
          timeout: 5000
          writetimeout: 5000

file:
  upload-dir: /app/uploads

vnpay:
  tmn-code: ${VNPAY_TMN_CODE:your-vnpay-tmn-code}
  hash-secret: ${VNPAY_HASH_SECRET:your-vnpay-hash-secret}
  return-url: ${VNPAY_RETURN_URL:https://web-tu-thien-production.up.railway.app/vnpay/return}
  api-url: https://sandbox.vnpayment.vn/paymentv2/vpcpay.html

logging:
  level:
    root: INFO
    com.zaxxer.hikari: DEBUG
    org.hibernate: INFO
    org.springframework.web: INFO
    org.springframework.security: INFO
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"
    
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: always
  health:
    db:
      enabled: true

server:
  port: ${PORT:8080}
